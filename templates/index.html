<!DOCTYPE html>

<html lang="en">

<head>

    <meta charset="UTF-8">

    <title>Escape the Dungeon</title>

    <style>

        body {

            background-image: url('/static/images/dungeon1.jpg');

            background-size: cover;

            color: white;

            text-align: center;

            font-family: sans-serif;

            padding-top: 100px;

        }

        input, button {

            padding: 10px;

            font-size: 18px;

        }

    </style>

</head>

<body>

    <h1>Escape the Dungeon</h1>

    <h2 id="question">Loading...</h2>

    <input id="answer" type="number" placeholder="Your answer" />

    <button onclick="submitAnswer()">Submit</button>

    <p id="result"></p>

 

    <audio id="correctSound" src="/static/sounds/correct.mp3"></audio>

    <audio id="wrongSound" src="/static/sounds/wrong.mp3"></audio>

 

    <script>

        let currentAnswer = null;

        let stage = 1;

 

        async function loadQuestion() {

            const res = await fetch('/get_question');

            const data = await res.json();

            document.getElementById('question').innerText = `Solve: ${data.question}`;

            currentAnswer = data.answer;

        }

 

        function changeBackground() {

            document.body.style.backgroundImage = `url('/static/images/dungeon${stage}.jpg')`;

        }

 

        function submitAnswer() {

            const userAnswer = parseInt(document.getElementById('answer').value);

            const resultEl = document.getElementById('result');

            if (userAnswer === currentAnswer) {

                document.getElementById('correctSound').play();

                resultEl.innerText = "Correct! Moving on...";

                stage++;

                if (stage > 3) {

                    resultEl.innerText = "ðŸŽ‰ You escaped the dungeon!";

                } else {

                    changeBackground();

                    loadQuestion();

                }

            } else {

                document.getElementById('wrongSound').play();

                resultEl.innerText = "Wrong! Try again.";

            }

            document.getElementById('answer').value = "";

        }

 

        window.onload = loadQuestion;

    </script>

</body>

</html>